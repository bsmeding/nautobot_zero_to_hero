# Bootstrap configuration for ztp (Alpine Linux)
# Network configuration and basic setup

# Configure management interface (eth0)
cat > /etc/network/interfaces << EOF
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
    address 172.20.20.15
    netmask 255.255.255.0
    gateway 172.20.20.1

auto eth1
iface eth1 inet static
    address 10.0.0.15
    netmask 255.255.255.0
EOF

# Configure data interface (eth1)
# eth1 will be used for ZTP server connections

# Enable SSH
apk add openssh
rc-update add sshd default
service sshd start

# Install basic tools
apk add curl wget net-tools tcpdump

# Create ZTP directory structure
mkdir -p /opt/ztp/{configs,scripts,templates}

# Set up basic logging
echo "ZTP Server initialized at $(date)" > /var/log/ztp.log

# Enable network interfaces
ifup eth0
ifup eth1

echo "ZTP server bootstrap completed"
